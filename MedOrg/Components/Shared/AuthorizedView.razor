@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager NavigationManager

<AuthorizeView Roles="@Roles" Policy="@Policy">
    <Authorized>
        @ChildContent
    </Authorized>
    <NotAuthorized>
        <div class="alert alert-warning text-center" role="alert">
            <h4 class="alert-heading">⚠️ Доступ запрещен</h4>
            <p>У вас нет прав для просмотра этой страницы.</p>
            <hr>
            <p class="mb-0">
                Пожалуйста, <a href="/login" class="alert-link">войдите</a> с соответствующими правами доступа.
            </p>
        </div>
    </NotAuthorized>
    <Authorizing>
        <div class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Загрузка...</span>
            </div>
            <p class="mt-3">Проверка прав доступа...</p>
        </div>
    </Authorizing>
</AuthorizeView>

@code {
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter]
    public string? Roles { get; set; }

    [Parameter]
    public string? Policy { get; set; }
}